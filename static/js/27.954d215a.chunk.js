(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{390:function(e,t,a){"use strict";var n=a(3),r=a.n(n),s=a(856),l=a(841),o=a(839),c=a(840),i=a(430);t.a=function(e){var t=e.size,a=e.isShowModal,n=e.toggleModal,m=e.children,u=e.title,g=e.okText,d=e.cancelText,f=e.clickOK,p=e.showCancel,h=void 0===p||p,b=e.clickCancel,v=(e.extraInfoLabel,e.hiddenFooter);return r.a.createElement(s.a,{isOpen:a,toggle:n,size:t},r.a.createElement(l.a,null,u),r.a.createElement(o.a,null,m),!v&&r.a.createElement(c.a,{className:"justify-content-center"},r.a.createElement(i.a,{color:"danger",onClick:f||n},g||"X\xe1c nh\u1eadn")," ",h&&r.a.createElement(i.a,{color:"secondary",onClick:b||n},d||"H\u1ee7y b\u1ecf")))}},391:function(e,t,a){"use strict";a.d(t,"a",function(){return g});var n=a(9),r=a(10),s=a(71),l=a(70),o=a(72),c=a(3),i=a.n(c),m=a(408),u=a.n(m),g=(a(392),function(e){function t(){return Object(n.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.totalPages,a=e.initialPage,n=e.forcePage,r=e.pageRangeDisplayed,s=e.onPageChange;return t>0&&i.a.createElement(u.a,{disableInitialCallback:!0,initialPage:a,forcePage:n,previousLabel:i.a.createElement("i",{className:"fa fa-chevron-left","aria-hidden":"true"}),nextLabel:i.a.createElement("i",{className:"fa fa-chevron-right","aria-hidden":"true"}),breakLabel:"...",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",pageCount:t,marginPagesDisplayed:2,pageRangeDisplayed:r||1,onPageChange:s,containerClassName:"pagination",activeLinkClassName:"active",activeClassName:"active"})}}]),t}(c.Component))},392:function(e,t,a){},393:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n={defaultTake:10,initialPage:1}},411:function(e,t,a){"use strict";var n=a(3),r=a.n(n),s=a(574),l=a(573),o=a(435),c=function(e){var t=e.title,a=e.placeholder,n=e.name,c=e.value,i=e.options,m=e.onChange,u=e.inputClass,g=e.isSearchable,d=e.labelField,f=e.valueField,p=e.type,h=e.defaultValue;return r.a.createElement(s.a,null,r.a.createElement(l.a,{className:"label-input",for:n},r.a.createElement("strong",null,t)),r.a.createElement(o.a,{onChange:m,isSearchable:g,options:i,className:"".concat(u),getOptionLabel:function(e){return e[d]},getOptionValue:function(e){return e[f]},name:n,placeholder:a,isMulti:!0,value:c,type:p,defaultValue:h}))};c.defaultProps={title:"",name:"",placeholder:"",type:"Select"},t.a=c},847:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),s=a(61),l=a(825),o=a(73),c=a(9),i=a(10),m=a(71),u=a(70),g=a(72),d=a(3),f=a.n(d),p=a(152),h=a(411),b=a(38),v=a(57),E=(a(661),a(662)),C=a(393),N=a(428),k=a(429),L=a(430),M=a(842),y=a(391),S=a(409),O=a.n(S),j=a(405),w=a.n(j),x=a(86),I=a(390),P=a(228),U=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).getUserManagementList=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Role",n=Object.assign({},{query:a.state.query,isDesc:e,sortName:t});a.props.getUserManagementList(n)},a.search=function(e){a.setState({params:Object(o.a)({},a.state.params,{skip:1}),query:e.target.value},function(){a.getUserManagementList(a.state.isDesc,a.state.sortName)})},a.getRoleList=function(){var e=Object.assign({},{query:a.state.query});a.props.getRoleList(e)},a.onSearchChange=function(e){e.persist(),a.delayedCallback(e)},a.onModelChange=function(e){var t,n,r=Object.assign({},a.state.item);null!=e.target?(t=e.target.name,n=e.target.value,r[t]=n):(n=e,r.roleIds=n.map(function(e,t){return e.id})),a.setState({item:r})},a.changeComplete=function(e){var t=Object.assign({},a.state.item);t.color=e.hex,a.setState({item:t,color:e.hex})},a.resetColor=function(e){var t=a.props.userManagementList.sources,n=Object(l.a)(t);n[t.findIndex(function(t){return t.id===e.id})].color="#000000",a.props.resetColor(n),a.resetColorAPI(e)},a.resetColorAPI=function(){var e=Object(s.a)(r.a.mark(function e(t){var n,s,l,o,c,i,m,u;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),n=Object.assign({},t),s=n.id,l=n.color,o=n.roles,c={color:l,id:s,roleIds:o.map(function(e){return e.id})},console.log(c),i=a.state,m=i.isDesc,u=i.sortName,e.prev=5,e.next=8,P.a.updateUserManagementList(c);case 8:a.getUserManagementList(m,u),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),Object(x.a)(e.t0.message);case 14:case"end":return e.stop()}},e,null,[[5,11]])}));return function(t){return e.apply(this,arguments)}}(),a.updateUserManagementList=Object(s.a)(r.a.mark(function e(){var t,n,s,l,o,c,i,m;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object.assign({},a.state.item),n=t.id,s=t.color,l=t.roleIds,o={color:s,id:n,roleIds:l},c=a.state,i=c.isDesc,m=c.sortName,e.prev=3,e.next=6,P.a.updateUserManagementList(o);case 6:a.toggleModalInfo(),a.getUserManagementList(i,m),Object(x.b)("User has been updated successfully"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),Object(x.a)(e.t0.message);case 14:case"end":return e.stop()}},e,null,[[3,11]])})),a.toggleModalInfo=function(e,t){console.log(a.state),a.setState(function(a){return{isShowInfoModal:!a.isShowInfoModal,item:e||{},formTitle:t}})},a.showUpdateModal=function(e){var t=Object.assign({},e);t.roleIds=t.roles.map(function(e,t){return e.id}),a.toggleModalInfo(t,"Update Role And Color For User")},a.toggleSort=function(e){var t=a.state.isDesc;a.setState({isDesc:!t,sortName:e,activeSort:e},function(){return a.getUserManagementList(a.state.isDesc,a.state.sortName)})},a.handlePageClick=function(e){a.setState({params:Object(o.a)({},a.state.params,{skip:e.selected+1})},function(){return a.getUserManagementList()})},a.componentDidMount=function(){a.getUserManagementList(),a.getRoleList()},a.state={isShowInfoModal:!1,formTitle:"",item:{},itemId:null,params:{skip:C.a.initialPage,take:C.a.defaultTake},isDesc:!0,sortName:"Role",query:"",activeSort:"Role"},a.delayedCallback=O.a.debounce(a.search,1e3),a}return Object(g.a)(t,e),Object(i.a)(t,[{key:"onSubmit",value:function(e){e.preventDefault(),this.form.validateAll(),this.saveUserManagementList()}},{key:"saveUserManagementList",value:function(){this.state.item.id&&this.updateUserManagementList()}},{key:"render",value:function(){var e=this;console.log("State hien tai",this.state);var t=this.state,a=t.item,n=t.isShowInfoModal,r=this.props.userManagementList,s=r.sources,l=r.pageIndex,o=r.totalPages,c=r.pageSize,i=s&&s.length>0,m=Object.assign([],this.props.roleList.roleList.sources);return f.a.createElement("div",null,f.a.createElement(I.a,{size:"lg",title:this.state.formTitle,isShowModal:n,hiddenFooter:!0},f.a.createElement("div",{className:"modal-wrapper"},f.a.createElement("div",{className:"form-wrapper"},f.a.createElement(w.a,{onSubmit:function(t){return e.onSubmit(t)},ref:function(t){e.form=t}},f.a.createElement(N.a,null,f.a.createElement(k.a,{xs:"6"},f.a.createElement(h.a,{name:"roleIds",title:"Role",labelField:"name",valueField:"id",options:m,required:!0,onChange:this.onModelChange,defaultValue:a.roles?a.roles:[]})),f.a.createElement(k.a,{xs:"6"},f.a.createElement("div",null," ",f.a.createElement("label",null,f.a.createElement("strong",null,"Color"))),f.a.createElement(E.SketchPicker,{style:{width:300},color:this.state.item.color,onChangeComplete:this.changeComplete}))),f.a.createElement("div",{className:"text-center ",style:{marginTop:20}},f.a.createElement(L.a,{className:" btn-primary",type:"submit"}," ","Confirm"," ")," ",f.a.createElement(L.a,{className:"btn-danger",onClick:this.toggleModalInfo}," ","Cancel"," ")))))),f.a.createElement("div",{className:"animated fadeIn"},f.a.createElement(N.a,{className:"flex-container header-table"},f.a.createElement(k.a,{xs:"5",sm:"5",md:"5",lg:"5"}),f.a.createElement(k.a,{xs:"5",sm:"5",md:"5",lg:"5"},f.a.createElement("input",{onChange:this.onSearchChange,className:"form-control form-control-sm custom_search",placeholder:"Searching..."}))),f.a.createElement(M.a,{responsive:!0,bordered:!0,className:"react-bs-table react-bs-table-bordered data-table"},f.a.createElement("thead",null,f.a.createElement("tr",{className:"table-header"},f.a.createElement("th",null,"STT"),f.a.createElement("th",{className:"group-sort",onClick:function(){return e.toggleSort("Name")}},"Name"," ",f.a.createElement("i",{className:"".concat("Name"===this.state.activeSort?"active-sort":"disactive-sort"," ").concat(this.state.isDesc?"fa fa-caret-up fa-lg":"fa fa-caret-down fa-lg")})),f.a.createElement("th",null,"Email"),f.a.createElement("th",{className:"group-sort",onClick:function(){return e.toggleSort("Role")}},"Role",f.a.createElement("i",{className:"".concat("Role"===this.state.activeSort?"active-sort":"disactive-sort"," ").concat(this.state.isDesc?"fa fa-caret-up fa-lg":"fa fa-caret-down fa-lg")})),f.a.createElement("th",null,"Color"),f.a.createElement("th",{className:"custom_action"},"Action"))),f.a.createElement("tbody",null,i&&s.map(function(t,a){return f.a.createElement("tr",{className:"table-row",key:a},f.a.createElement("td",null," ",0!==l?l*c-c+ ++a:++a),f.a.createElement("td",null," ",t.name," "),f.a.createElement("td",null," ",t.email," "),f.a.createElement("td",null,t.roles.map(function(e,t){return e.name}).join(", ")),f.a.createElement("td",null,f.a.createElement("div",null,f.a.createElement("i",{className:"fa fa-square",style:{defaultValue:"grey",color:t.color,fontSize:40}}))),f.a.createElement("td",null,f.a.createElement("div",{className:"custom_action_column"},f.a.createElement(L.a,{className:"btn btn-primary fa fa-pencil",onClick:function(){return e.showUpdateModal(t)},style:{fontSize:20}}),f.a.createElement(L.a,{className:"btn-success",onClick:function(){return e.resetColor(t)}},"Reset Color"))))}))),i&&o>1&&f.a.createElement(y.a,{totalPages:o,page:l,initialPage:0,forcePage:l-1,pageRangeDisplayed:2,onPageChange:this.handlePageClick})))}}]),t}(d.Component),D={getUserManagementList:b.e,getRoleList:v.d,resetColor:b.h};t.default=Object(p.b)(function(e){return{roleList:e.roleList,userManagementList:e.userManagementList}},D)(U)}}]);
//# sourceMappingURL=27.954d215a.chunk.js.map